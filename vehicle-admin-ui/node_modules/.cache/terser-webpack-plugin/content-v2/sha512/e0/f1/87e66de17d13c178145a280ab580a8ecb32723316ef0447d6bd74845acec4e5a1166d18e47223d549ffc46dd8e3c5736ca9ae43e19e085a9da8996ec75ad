{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-2d0f089c\"],{\"9d94\":function(e,o,t){\"use strict\";t.r(o);t(\"55dd\"),t(\"7f7f\");var r=function(){var e=this,o=e._self._c;return o(\"div\",[o(\"Card\",{attrs:{\"dis-hover\":!0}},[o(\"Row\",[o(\"Col\",{attrs:{span:\"8\"}},[e.options.add?o(\"Button\",{staticStyle:{\"margin-right\":\"5px\"},attrs:{type:\"primary\",size:\"small\"},on:{click:function(o){return e.handleAddButtonClick()}}},[e._v(\"\\n        新增\\n      \")]):e._e(),e.options.remove?o(\"Button\",{staticStyle:{\"margin-right\":\"5px\"},attrs:{type:\"primary\",size:\"small\",disabled:e.options.removeDisabled},on:{click:function(o){return e.handleRemoveButtonClick()}}},[e._v(\"\\n        删除\\n      \")]):e._e(),o(\"RemoveModal\",{attrs:{modal:e.modal.remove,id:e.modal.id},on:{\"on-modal-change\":e.handleRemoveModalChange,\"on-refresh-page\":function(o){return e.handleRefreshChange(!0)}}}),o(\"Tree\",{ref:\"resourceTree\",attrs:{data:e.resourceStore.items,\"empty-text\":e.options.page?0==e.resourceStore.items.length?\"加载中...\":\"\":\"未经授权, 请联系管理员\"},on:{\"on-select-change\":e.handleSelectChange}})],1),o(\"Col\",{attrs:{span:\"16\"}},[o(\"Form\",{ref:\"resourceForm\",attrs:{model:e.resourceForm,rules:e.ruleValidate,\"label-width\":80}},[o(\"Row\",[o(\"Col\",{attrs:{span:\"8\"}},[o(\"Form-item\",{attrs:{label:\"名称\",prop:\"name\"}},[o(\"Input\",{attrs:{size:\"small\",placeholder:\"请输入名称\"},model:{value:e.resourceForm.name,callback:function(o){e.$set(e.resourceForm,\"name\",o)},expression:\"resourceForm.name\"}})],1)],1),o(\"Col\",{attrs:{span:\"8\"}},[o(\"Form-item\",{attrs:{label:\"编码\",prop:\"code\"}},[o(\"Input\",{attrs:{size:\"small\",placeholder:\"请输入编码\"},model:{value:e.resourceForm.code,callback:function(o){e.$set(e.resourceForm,\"code\",o)},expression:\"resourceForm.code\"}})],1)],1)],1),o(\"Row\",[o(\"Col\",{attrs:{span:\"8\"}},[o(\"Form-item\",{attrs:{label:\"URL\",prop:\"url\"}},[o(\"Input\",{attrs:{size:\"small\",placeholder:\"请输入URL\"},model:{value:e.resourceForm.url,callback:function(o){e.$set(e.resourceForm,\"url\",o)},expression:\"resourceForm.url\"}})],1)],1),o(\"Col\",{attrs:{span:\"8\"}},[o(\"Form-item\",{attrs:{label:\"图标\",prop:\"icon\"}},[o(\"Input\",{attrs:{size:\"small\",placeholder:\"请输入图标\"},model:{value:e.resourceForm.icon,callback:function(o){e.$set(e.resourceForm,\"icon\",o)},expression:\"resourceForm.icon\"}})],1)],1)],1),o(\"Row\",[o(\"Col\",{attrs:{span:\"8\"}},[o(\"Form-item\",{attrs:{label:\"父节点\",prop:\"pname\"}},[o(\"Input\",{attrs:{size:\"small\",placeholder:\"请输入名称\",readonly:\"\"},model:{value:e.resourceForm.pname,callback:function(o){e.$set(e.resourceForm,\"pname\",o)},expression:\"resourceForm.pname\"}})],1)],1),o(\"Col\",{attrs:{span:\"8\"}},[o(\"Form-item\",{attrs:{label:\"排序号\",prop:\"sort\"}},[o(\"Input\",{attrs:{size:\"small\",placeholder:\"请输入排序号\"},model:{value:e.resourceForm.sort,callback:function(o){e.$set(e.resourceForm,\"sort\",o)},expression:\"resourceForm.sort\"}})],1)],1)],1),o(\"Row\",[o(\"Col\",{attrs:{span:\"8\"}},[o(\"Form-item\",{attrs:{label:\"菜单节点\",prop:\"isMenu\"}},[o(\"i-switch\",{attrs:{\"true-value\":1,\"false-value\":0},model:{value:e.resourceForm.isMenu,callback:function(o){e.$set(e.resourceForm,\"isMenu\",o)},expression:\"resourceForm.isMenu\"}})],1)],1),o(\"Col\",{attrs:{span:\"8\"}},[o(\"Form-item\",{attrs:{label:\"叶子节点\",prop:\"isLeaf\"}},[o(\"i-switch\",{attrs:{\"true-value\":1,\"false-value\":0},model:{value:e.resourceForm.isLeaf,callback:function(o){e.$set(e.resourceForm,\"isLeaf\",o)},expression:\"resourceForm.isLeaf\"}})],1)],1)],1),o(\"Row\",[o(\"Col\",{attrs:{span:\"16\"}},[o(\"Form-item\",{attrs:{label:\"备注\",prop:\"remark\"}},[o(\"Input\",{attrs:{type:\"textarea\",size:\"small\",placeholder:\"请输入备注\"},model:{value:e.resourceForm.remark,callback:function(o){e.$set(e.resourceForm,\"remark\",o)},expression:\"resourceForm.remark\"}})],1)],1)],1),o(\"FormItem\",[o(\"Button\",{staticStyle:{\"margin-right\":\"5px\"},attrs:{type:\"default\",size:\"small\"},on:{click:e.handleCancel}},[e._v(e._s(e.cancelText))]),\"\"!==e.resourceForm.id&&e.options.modify||\"\"===e.resourceForm.id&&e.options.add?o(\"Button\",{attrs:{type:\"primary\",size:\"small\",loading:e.modifyLoading},on:{click:e.handleOk}},[(e.modifyLoading,o(\"span\",[e._v(e._s(e.okText))]))]):e._e()],1),o(\"Form-item\",{attrs:{prop:\"id\"}})],1)],1)],1)],1)],1)},s=[],a=t(\"2f62\"),i=function(){var e=this,o=e._self._c;return o(\"div\",[o(\"Modal\",{attrs:{width:\"300\"},on:{\"on-cancel\":e.handleCancel},model:{value:e.removeModal,callback:function(o){e.removeModal=o},expression:\"removeModal\"}},[o(\"p\",{staticStyle:{color:\"#f60\"},attrs:{slot:\"header\"},slot:\"header\"},[o(\"Icon\",{attrs:{type:\"information-circled\"}}),o(\"span\",[e._v(e._s(e.title))])],1),o(\"div\",{staticStyle:{\"text-align\":\"center\"}},[o(\"p\",[e._v(\"确认删除该记录？\")])]),o(\"div\",{attrs:{slot:\"footer\"},slot:\"footer\"},[o(\"Button\",{attrs:{type:\"error\",size:\"small\",long:\"\",loading:e.removeLoading},on:{click:e.handleOk}},[(e.removeLoading,o(\"span\",[e._v(e._s(e.okText))]))])],1)])],1)},n=[],l={name:\"removeModal\",props:{id:{type:String,default:\"\"},modal:{type:Boolean,default:!1},title:{type:String,default:\"资源删除\"},okText:{type:String,default:\"确认\"}},data:function(){return{removeModal:!1,removeLoading:!1,removeForm:{id:\"\"}}},watch:{modal:function(e){e&&\"\"!==this.id&&(this.removeForm.id=this.id,this.removeModal=e)},removeModal:function(e){e||this.$emit(\"on-modal-change\",\"\",e)}},methods:{handleOk:function(){var e=this;this.removeLoading=!0,this.$store.dispatch(\"removeResource\",{data:{id:this.removeForm.id}}).then((function(){e.handleCancel(),e.$Message.success(e.title+\"成功！\"),e.$emit(\"on-refresh-page\")}),(function(o){e.handleCancel(),e.$Message.error(o.data.message)}))},handleCancel:function(){this.removeForm.id=\"\",this.removeModal=!1,this.removeLoading=!1}}},c=l,d=t(\"2877\"),m=Object(d[\"a\"])(c,i,n,!1,null,null,null),u=m.exports,p={name:\"resource\",props:{okText:{type:String,default:\"确定\"},cancelText:{type:String,default:\"取消\"}},components:{RemoveModal:u},data:function(){return{modifyLoading:!1,modal:{id:\"\",remove:!1},options:{page:!1,add:!0,modify:!1,show:!1,remove:!1,removeDisabled:!0},resourceForm:{id:\"\",name:\"\",code:\"\",url:\"\",icon:\"\",remark:\"\",pid:\"\",pname:\"\",sort:0,isMenu:0,isLeaf:0},ruleValidate:{name:[{required:!0,message:\"名称不能为空\",trigger:\"blur\"},{type:\"string\",max:10,message:\"名称不能多于10个字符\",trigger:\"blur\"}],code:[{required:!0,message:\"编码不能为空\",trigger:\"blur\"},{type:\"string\",max:10,message:\"编码不能多于10个字符\",trigger:\"blur\"}]}}},computed:Object(a[\"e\"])([\"resourceStore\",\"loginStore\"]),created:function(){this.loginStore.menuOptionMap[this.$route.path]&&this.initOptionsStatus()},mounted:function(){this.options.page&&this.handlePageChange()},methods:{initOptionsStatus:function(){this.options.page=-1!==this.loginStore.menuOptionMap[this.$route.path].indexOf(\"YHGL:CDZY:CX\"),this.options.add=-1!==this.loginStore.menuOptionMap[this.$route.path].indexOf(\"YHGL:CDZY:XZ\"),this.options.modify=-1!==this.loginStore.menuOptionMap[this.$route.path].indexOf(\"YHGL:CDZY:BJ\"),this.options.show=-1!==this.loginStore.menuOptionMap[this.$route.path].indexOf(\"YHGL:CDZY:CK\"),this.options.remove=-1!==this.loginStore.menuOptionMap[this.$route.path].indexOf(\"YHGL:CDZY:SC\")},listResource:function(){this.$store.dispatch(\"listResource\")},showResource:function(){var e=this;this.$store.dispatch(\"showResource\",{params:{id:this.resourceForm.id}}).then((function(){e.resourceForm=e.resourceStore.item}))},handleSelectChange:function(e){e.length>0?(this.options.removeDisabled=!1,this.resourceForm.id=e[0].id,this.showResource()):(this.options.removeDisabled=!0,this.resourceForm.id=\"\",this.resetFields())},handleRefreshChange:function(e){e&&this.resetFields(),this.handlePageChange()},handlePageChange:function(){this.listResource()},handleRemoveModalChange:function(e,o){this.modal.id=e,this.modal.remove=o},handleOk:function(){var e=this;this.$refs.resourceForm.validate((function(o){o&&(e.modifyLoading=!0,e.$store.dispatch(\"\"===e.resourceForm.id?\"addResource\":\"modifyResource\",{data:e.resourceForm}).then((function(){e.$Message.success((\"\"===e.resourceForm.id?\"资源新增\":\"资源编辑\")+\"成功！\"),e.handleCancel(),e.handlePageChange()}),(function(o){e.modifyLoading=!1,e.$Message.error(o.data.message)})))}))},handleCancel:function(){this.resetFields(),this.modifyLoading=!1},resetFields:function(){this.$refs.resourceForm.resetFields()},handleAddButtonClick:function(){this.resetFields();var e=this.$refs.resourceTree.getSelectedNodes();1===e.length&&(this.resourceForm.pid=e[0].id,this.resourceForm.pname=e[0].title)},handleRemoveButtonClick:function(){this.resetFields();var e=this.$refs.resourceTree.getSelectedNodes();1===e.length&&(this.modal.id=e[0].id,this.modal.remove=!0)}}},h=p,f=Object(d[\"a\"])(h,r,s,!1,null,null,null);o[\"default\"]=f.exports}}]);","extractedComments":[]}