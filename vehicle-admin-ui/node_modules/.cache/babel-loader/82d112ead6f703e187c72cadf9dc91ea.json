{"remainingRequest":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/thread-loader/dist/cjs.js!/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/babel-loader/lib/index.js!/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/src/app/organization/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/src/app/organization/index.vue","mtime":1734063882287},{"path":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/.babelrc","mtime":1734230871032},{"path":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/cache-loader/dist/cjs.js","mtime":1734234711738},{"path":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/thread-loader/dist/cjs.js","mtime":1734234711278},{"path":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/babel-loader/lib/index.js","mtime":1734234712752},{"path":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/cache-loader/dist/cjs.js","mtime":1734234711738},{"path":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/vue-loader/lib/index.js","mtime":1734234711707}],"contextDependencies":[],"result":["import \"./i18n\";\nimport { mapState } from 'vuex';\nimport RemoveModal from \"./form/remove\";\nexport default {\n  name: 'organization',\n  props: {\n    okText: {\n      type: String,\n      default: '确定'\n    },\n    cancelText: {\n      type: String,\n      default: '取消'\n    }\n  },\n  components: {\n    RemoveModal: RemoveModal\n  },\n  data: function data() {\n    return {\n      modifyLoading: false,\n      modal: {\n        id: '',\n        remove: false\n      },\n      options: {\n        page: false,\n        add: true,\n        modify: false,\n        show: false,\n        remove: false,\n        removeDisabled: true\n      },\n      organizationForm: {\n        id: '',\n        name: '',\n        code: '',\n        remark: '',\n        pid: '',\n        pname: '',\n        sort: 0,\n        isLeaf: 0\n      },\n      ruleValidate: {\n        name: [{\n          required: true,\n          message: '名称不能为空',\n          trigger: 'blur'\n        }, {\n          type: 'string',\n          max: 10,\n          message: '名称不能多于10个字符',\n          trigger: 'blur'\n        }],\n        code: [{\n          required: true,\n          message: '编码不能为空',\n          trigger: 'blur'\n        }, {\n          type: 'string',\n          max: 10,\n          message: '编码不能多于10个字符',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  computed: mapState(['organizationStore', 'loginStore']),\n  created: function created() {\n    if (this.loginStore.menuOptionMap[this.$route.path]) {\n      this.initOptionsStatus();\n    }\n  },\n  mounted: function mounted() {\n    if (this.options.page) {\n      this.handlePageChange();\n    }\n  },\n  methods: {\n    initOptionsStatus: function initOptionsStatus() {\n      this.options.page = this.loginStore.menuOptionMap[this.$route.path].indexOf('YHGL:ZZJG:CX') !== -1;\n      this.options.add = this.loginStore.menuOptionMap[this.$route.path].indexOf('YHGL:ZZJG:XZ') !== -1;\n      this.options.modify = this.loginStore.menuOptionMap[this.$route.path].indexOf('YHGL:ZZJG:BJ') !== -1;\n      this.options.show = this.loginStore.menuOptionMap[this.$route.path].indexOf('YHGL:ZZJG:CK') !== -1;\n      this.options.remove = this.loginStore.menuOptionMap[this.$route.path].indexOf('YHGL:ZZJG:SC') !== -1;\n    },\n    listOrganization: function listOrganization() {\n      this.$store.dispatch('listOrganization');\n    },\n    showOrganization: function showOrganization() {\n      var _this = this;\n      this.$store.dispatch('showOrganization', {\n        params: {\n          id: this.organizationForm.id\n        }\n      }).then(function () {\n        _this.organizationForm = _this.organizationStore.item;\n      });\n    },\n    handleSelectChange: function handleSelectChange(selections) {\n      if (selections.length > 0) {\n        this.options.removeDisabled = false;\n        this.organizationForm.id = selections[0].id;\n        this.showOrganization();\n      } else {\n        this.options.removeDisabled = true;\n        this.organizationForm.id = '';\n        this.resetFields();\n      }\n    },\n    handleRefreshChange: function handleRefreshChange(cleanModifyForm) {\n      if (cleanModifyForm) {\n        this.resetFields();\n      }\n      this.handlePageChange();\n    },\n    handlePageChange: function handlePageChange() {\n      this.listOrganization();\n    },\n    handleRemoveModalChange: function handleRemoveModalChange(id, modal) {\n      this.modal.id = id;\n      this.modal.remove = modal;\n    },\n    handleOk: function handleOk() {\n      var _this2 = this;\n      this.$refs.organizationForm.validate(function (valid) {\n        if (valid) {\n          _this2.modifyLoading = true;\n          _this2.$store.dispatch(_this2.organizationForm.id === '' ? 'addOrganization' : 'modifyOrganization', {\n            data: _this2.organizationForm\n          }).then(function () {\n            _this2.$Message.success((_this2.organizationForm.id === '' ? '机构新增' : '机构编辑') + '成功！');\n            _this2.handleCancel();\n            _this2.handlePageChange();\n          }, function (res) {\n            _this2.modifyLoading = false;\n            _this2.$Message.error(res.data.message);\n          });\n        }\n      });\n    },\n    handleCancel: function handleCancel() {\n      this.resetFields();\n      this.modifyLoading = false;\n    },\n    resetFields: function resetFields() {\n      this.$refs.organizationForm.resetFields();\n    },\n    handleAddButtonClick: function handleAddButtonClick() {\n      this.resetFields();\n      var selections = this.$refs.organizationTree.getSelectedNodes();\n      if (selections.length === 1) {\n        this.organizationForm.pid = selections[0].id;\n        this.organizationForm.pname = selections[0].title;\n      }\n    },\n    handleRemoveButtonClick: function handleRemoveButtonClick() {\n      this.resetFields();\n      var selections = this.$refs.organizationTree.getSelectedNodes();\n      if (selections.length === 1) {\n        this.modal.id = selections[0].id;\n        this.modal.remove = true;\n      }\n    }\n  }\n};",null]}