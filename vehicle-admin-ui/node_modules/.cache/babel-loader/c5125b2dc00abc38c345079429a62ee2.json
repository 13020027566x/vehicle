{"remainingRequest":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/babel-loader/lib/index.js!/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/eslint-loader/index.js??ref--13-0!/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/src/router/index.js","dependencies":[{"path":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/src/router/index.js","mtime":1734063882630},{"path":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/.babelrc","mtime":1734230871032},{"path":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/cache-loader/dist/cjs.js","mtime":1734234711738},{"path":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/babel-loader/lib/index.js","mtime":1734234712752},{"path":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/eslint-loader/index.js","mtime":1734234711712}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.function.name\";\nimport _toConsumableArray from \"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/@babel/runtime-corejs2/helpers/esm/toConsumableArray.js\";\nimport Vue from 'vue';\nimport iView from 'iview';\nimport Router from 'vue-router';\nimport store from '@/store';\nimport config from '@/config';\nimport { iviewAdminRouter } from \"./iviewAdmin\";\nimport { adminRouter } from \"./app\";\nimport { canTurnTo, getToken, setTitle, setToken, setMenuOptionMapInSessionstorage, getMenuOptionMapFromSessionstorage } from '@/libs/util';\nimport { oneOf } from '@/libs/tools';\nVue.use(Router);\n\n// 所有上面定义的路由都要写在下面的routes里\nexport var routes = [].concat(_toConsumableArray(adminRouter), _toConsumableArray(iviewAdminRouter));\nvar router = new Router({\n  routes: routes,\n  mode: 'hash'\n});\nvar turnTo = function turnTo(to, next, user) {\n  // 拉取用户信息，通过用户权限和跳转的页面的name来判断是否有权限访问;access必须是一个数组，如：['super_admin'] ['super_admin', 'admin']\n  if (canTurnTo(to.name, [user.access], routes)) {\n    if (config.checkUserMenu && !oneOf(to.name, config.checkUserMenuIgnoreRouters) && !store.state.loginStore.menuOptionMap[to.path]) {\n      var menuOptionMap = getMenuOptionMapFromSessionstorage();\n      if (Object.keys(menuOptionMap).length <= 0) {\n        // 有权限，继续访问\n        store.dispatch('listUserMenuOperation', {\n          params: {\n            menuPath: to.path\n          }\n        }).then(function () {\n          setMenuOptionMapInSessionstorage(store.state.loginStore.menuOptionMap);\n          next();\n        });\n      } else {\n        store.state.loginStore.menuOptionMap = menuOptionMap;\n        if (!menuOptionMap.hasOwnProperty(to.path)) {\n          // 有权限，继续访问\n          store.dispatch('listUserMenuOperation', {\n            params: {\n              menuPath: to.path\n            }\n          }).then(function () {\n            setMenuOptionMapInSessionstorage(store.state.loginStore.menuOptionMap);\n            next();\n          });\n        } else {\n          next();\n        }\n      }\n    } else {\n      next();\n    }\n  } else {\n    // 无权限，重定向到401页面\n    next({\n      replace: true,\n      name: 'error_401'\n    });\n  }\n};\nrouter.beforeEach(function (to, from, next) {\n  var token = getToken();\n  if (!token && to.name !== config.loginName) {\n    // 未登录且要跳转的页面不是登录页\n    iView.LoadingBar.start();\n    next({\n      name: config.loginName // 跳转到登录页\n    });\n  } else if (!token && to.name === config.loginName) {\n    // 未登陆且要跳转的页面是登录页\n    iView.LoadingBar.start();\n    next(); // 跳转\n  } else if (token && to.name === config.loginName) {\n    // 已登录且要跳转的页面是登录页 & 跳转到home页\n    if (from.name === config.homeName) {\n      next(false);\n    } else {\n      iView.LoadingBar.start();\n      next({\n        name: config.homeName\n      });\n    }\n  } else {\n    // 已登录且要跳转的页面不是登录页\n    if (!store.state.iviewAdminUserStore.hasGetInfo) {\n      // 刷新页面时，重新获取当前登录用户信息\n      store.dispatch('userInfo').then(function () {\n        var user = store.state.loginStore.user;\n        store.commit('setToken', user.token);\n        store.commit('setAvatar', user.avatar);\n        store.commit('setUserName', user.name);\n        store.commit('setAccess', user.access);\n        store.commit('setHasGetInfo', true);\n        turnTo(to, next, user);\n      }).catch(function () {\n        setToken('');\n        next({\n          name: 'login'\n        });\n      });\n    } else {\n      var user = store.state.loginStore.user;\n      turnTo(to, next, user);\n    }\n  }\n});\nrouter.afterEach(function (to) {\n  setTitle(to, router.app);\n  iView.LoadingBar.finish();\n  window.scrollTo(0, 0);\n});\nexport default router;",{"version":3,"names":["Vue","iView","Router","store","config","iviewAdminRouter","adminRouter","canTurnTo","getToken","setTitle","setToken","setMenuOptionMapInSessionstorage","getMenuOptionMapFromSessionstorage","oneOf","use","routes","concat","_toConsumableArray","router","mode","turnTo","to","next","user","name","access","checkUserMenu","checkUserMenuIgnoreRouters","state","loginStore","menuOptionMap","path","Object","keys","length","dispatch","params","menuPath","then","hasOwnProperty","replace","beforeEach","from","token","loginName","LoadingBar","start","homeName","iviewAdminUserStore","hasGetInfo","commit","avatar","catch","afterEach","app","finish","window","scrollTo"],"sources":["/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/src/router/index.js"],"sourcesContent":["import Vue from 'vue'\nimport iView from 'iview'\nimport Router from 'vue-router'\nimport store from '@/store'\nimport config from '@/config'\nimport { iviewAdminRouter } from './iviewAdmin'\nimport { adminRouter } from './app'\nimport { canTurnTo, getToken, setTitle, setToken, setMenuOptionMapInSessionstorage, getMenuOptionMapFromSessionstorage } from '@/libs/util'\nimport { oneOf } from '@/libs/tools'\n\nVue.use(Router)\n\n// 所有上面定义的路由都要写在下面的routes里\nexport const routes = [\n  ...adminRouter,\n  ...iviewAdminRouter\n]\n\nconst router = new Router({\n  routes,\n  mode: 'hash'\n})\n\nconst turnTo = (to, next, user) => {\n  // 拉取用户信息，通过用户权限和跳转的页面的name来判断是否有权限访问;access必须是一个数组，如：['super_admin'] ['super_admin', 'admin']\n  if (canTurnTo(to.name, [user.access], routes)) {\n    if (config.checkUserMenu && !oneOf(to.name, config.checkUserMenuIgnoreRouters) && !store.state.loginStore.menuOptionMap[to.path]) {\n      let menuOptionMap = getMenuOptionMapFromSessionstorage()\n      if (Object.keys(menuOptionMap).length <= 0) {\n        // 有权限，继续访问\n        store.dispatch('listUserMenuOperation', {\n          params: {\n            menuPath: to.path\n          }\n        }).then(() => {\n          setMenuOptionMapInSessionstorage(store.state.loginStore.menuOptionMap)\n          next()\n        })\n      } else {\n        store.state.loginStore.menuOptionMap = menuOptionMap\n        if (!menuOptionMap.hasOwnProperty(to.path)) {\n          // 有权限，继续访问\n          store.dispatch('listUserMenuOperation', {\n            params: {\n              menuPath: to.path\n            }\n          }).then(() => {\n            setMenuOptionMapInSessionstorage(store.state.loginStore.menuOptionMap)\n            next()\n          })\n        } else {\n          next()\n        }\n      }\n    } else {\n      next()\n    }\n  } else {\n    // 无权限，重定向到401页面\n    next({\n      replace: true,\n      name: 'error_401'\n    })\n  }\n}\n\nrouter.beforeEach((to, from, next) => {\n  const token = getToken()\n  if (!token && to.name !== config.loginName) {\n    // 未登录且要跳转的页面不是登录页\n    iView.LoadingBar.start()\n    next({\n      name: config.loginName // 跳转到登录页\n    })\n  } else if (!token && to.name === config.loginName) {\n    // 未登陆且要跳转的页面是登录页\n    iView.LoadingBar.start()\n    next() // 跳转\n  } else if (token && to.name === config.loginName) {\n    // 已登录且要跳转的页面是登录页 & 跳转到home页\n    if (from.name === config.homeName) {\n      next(false)\n    } else {\n      iView.LoadingBar.start()\n      next({\n        name: config.homeName\n      })\n    }\n  } else {\n    // 已登录且要跳转的页面不是登录页\n    if (!store.state.iviewAdminUserStore.hasGetInfo) {\n      // 刷新页面时，重新获取当前登录用户信息\n      store.dispatch('userInfo').then(() => {\n        let user = store.state.loginStore.user\n        store.commit('setToken', user.token)\n        store.commit('setAvatar', user.avatar)\n        store.commit('setUserName', user.name)\n        store.commit('setAccess', user.access)\n        store.commit('setHasGetInfo', true)\n        turnTo(to, next, user)\n      }).catch(() => {\n        setToken('')\n        next({\n          name: 'login'\n        })\n      })\n    } else {\n      let user = store.state.loginStore.user\n      turnTo(to, next, user)\n    }\n  }\n})\n\nrouter.afterEach((to) => {\n  setTitle(to, router.app)\n  iView.LoadingBar.finish()\n  window.scrollTo(0, 0)\n})\n\nexport default router\n"],"mappings":"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","ignoreList":[]}]}