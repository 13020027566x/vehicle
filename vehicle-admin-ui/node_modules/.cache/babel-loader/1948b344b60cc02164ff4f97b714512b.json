{"remainingRequest":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/babel-loader/lib/index.js!/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/eslint-loader/index.js??ref--13-0!/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/src/libs/httpRequest.js","dependencies":[{"path":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/src/libs/httpRequest.js","mtime":1734063882356},{"path":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/.babelrc","mtime":1734230871032},{"path":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/cache-loader/dist/cjs.js","mtime":1734234711738},{"path":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/babel-loader/lib/index.js","mtime":1734234712752},{"path":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/eslint-loader/index.js","mtime":1734234711712}],"contextDependencies":[],"result":["import \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport _classCallCheck from \"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/@babel/runtime-corejs2/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/@babel/runtime-corejs2/helpers/esm/createClass.js\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport axios from 'axios';\nimport store from '@/store';\n// import { Spin } from 'iview'\nvar addErrorLog = function addErrorLog(errorInfo) {\n  var statusText = errorInfo.statusText,\n    status = errorInfo.status,\n    responseURL = errorInfo.request.responseURL;\n  var info = {\n    type: 'ajax',\n    code: status,\n    mes: statusText,\n    url: responseURL\n  };\n  if (!responseURL.includes('save_error_logger')) store.dispatch('addErrorLog', info);\n};\nvar HttpRequest = /*#__PURE__*/function () {\n  function HttpRequest() {\n    var baseUrl = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : baseURL;\n    _classCallCheck(this, HttpRequest);\n    this.baseUrl = baseUrl;\n    this.queue = {};\n  }\n  return _createClass(HttpRequest, [{\n    key: \"getInsideConfig\",\n    value: function getInsideConfig() {\n      var config = {\n        baseURL: this.baseUrl,\n        withCredentials: true,\n        headers: {\n          //\n        }\n      };\n      return config;\n    }\n  }, {\n    key: \"destroy\",\n    value: function destroy(url) {\n      delete this.queue[url];\n      if (!Object.keys(this.queue).length) {\n        // Spin.hide()\n      }\n    }\n  }, {\n    key: \"interceptors\",\n    value: function interceptors(instance, url) {\n      var _this = this;\n      // 请求拦截\n      instance.interceptors.request.use(function (config) {\n        // 添加全局的loading...\n        if (!Object.keys(_this.queue).length) {\n          // Spin.show() // 不建议开启，因为界面不友好\n        }\n        _this.queue[url] = true;\n        return config;\n      }, function (error) {\n        return Promise.reject(error);\n      });\n      // 响应拦截\n      instance.interceptors.response.use(function (res) {\n        _this.destroy(url);\n        var data = res.data,\n          status = res.status;\n        return {\n          data: data,\n          status: status\n        };\n      }, function (error) {\n        _this.destroy(url);\n        var errorInfo = error.response;\n        if (!errorInfo) {\n          var _JSON$parse = JSON.parse(JSON.stringify(error)),\n            _JSON$parse$request = _JSON$parse.request,\n            statusText = _JSON$parse$request.statusText,\n            status = _JSON$parse$request.status,\n            config = _JSON$parse.config;\n          errorInfo = {\n            statusText: statusText,\n            status: status,\n            request: {\n              responseURL: config.url\n            }\n          };\n        }\n        addErrorLog(errorInfo);\n        return Promise.reject(error);\n      });\n    }\n  }, {\n    key: \"request\",\n    value: function request(options) {\n      var instance = axios.create();\n      options = Object.assign(this.getInsideConfig(), options);\n      this.interceptors(instance, options.url);\n      return instance(options);\n    }\n  }]);\n}();\nexport default HttpRequest;",{"version":3,"names":["axios","store","addErrorLog","errorInfo","statusText","status","responseURL","request","info","type","code","mes","url","includes","dispatch","HttpRequest","baseUrl","arguments","length","undefined","baseURL","_classCallCheck","queue","_createClass","key","value","getInsideConfig","config","withCredentials","headers","destroy","Object","keys","interceptors","instance","_this","use","error","Promise","reject","response","res","data","_JSON$parse","JSON","parse","stringify","_JSON$parse$request","options","create","assign"],"sources":["/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/src/libs/httpRequest.js"],"sourcesContent":["import axios from 'axios'\nimport store from '@/store'\n// import { Spin } from 'iview'\nconst addErrorLog = errorInfo => {\n  const { statusText, status, request: { responseURL } } = errorInfo\n  let info = {\n    type: 'ajax',\n    code: status,\n    mes: statusText,\n    url: responseURL\n  }\n  if (!responseURL.includes('save_error_logger')) store.dispatch('addErrorLog', info)\n}\n\nclass HttpRequest {\n  constructor (baseUrl = baseURL) {\n    this.baseUrl = baseUrl\n    this.queue = {}\n  }\n\n  getInsideConfig () {\n    const config = {\n      baseURL: this.baseUrl,\n      withCredentials: true,\n      headers: {\n        //\n      }\n    }\n    return config\n  }\n\n  destroy (url) {\n    delete this.queue[url]\n    if (!Object.keys(this.queue).length) {\n      // Spin.hide()\n    }\n  }\n\n  interceptors (instance, url) {\n    // 请求拦截\n    instance.interceptors.request.use(config => {\n      // 添加全局的loading...\n      if (!Object.keys(this.queue).length) {\n        // Spin.show() // 不建议开启，因为界面不友好\n      }\n      this.queue[url] = true\n      return config\n    }, error => {\n      return Promise.reject(error)\n    })\n    // 响应拦截\n    instance.interceptors.response.use(res => {\n      this.destroy(url)\n      const { data, status } = res\n      return { data, status }\n    }, error => {\n      this.destroy(url)\n      let errorInfo = error.response\n      if (!errorInfo) {\n        const { request: { statusText, status }, config } = JSON.parse(JSON.stringify(error))\n        errorInfo = {\n          statusText,\n          status,\n          request: { responseURL: config.url }\n        }\n      }\n      addErrorLog(errorInfo)\n      return Promise.reject(error)\n    })\n  }\n\n  request (options) {\n    const instance = axios.create()\n    options = Object.assign(this.getInsideConfig(), options)\n    this.interceptors(instance, options.url)\n    return instance(options)\n  }\n}\n\nexport default HttpRequest\n"],"mappings":"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","ignoreList":[]}]}