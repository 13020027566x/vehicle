{"remainingRequest":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/babel-loader/lib/index.js!/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/src/views/components/org-tree/components/org-view.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/src/views/components/org-tree/components/org-view.vue","mtime":1734063882533},{"path":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/.babelrc","mtime":1734230871032},{"path":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/cache-loader/dist/cjs.js","mtime":1734234711738},{"path":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/babel-loader/lib/index.js","mtime":1734234712752},{"path":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/cache-loader/dist/cjs.js","mtime":1734234711738},{"path":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/vue-loader/lib/index.js","mtime":1734234711707}],"contextDependencies":[],"result":["import \"core-js/modules/es6.number.constructor\";\nimport { on, off } from '@/libs/tools';\nvar menuList = [{\n  key: 'edit',\n  label: '编辑部门'\n}, {\n  key: 'detail',\n  label: '查看部门'\n}, {\n  key: 'new',\n  label: '新增子部门'\n}, {\n  key: 'delete',\n  label: '删除部门'\n}];\nexport default {\n  name: 'OrgView',\n  props: {\n    zoomHandled: {\n      type: Number,\n      default: 1\n    },\n    data: Object\n  },\n  data: function data() {\n    return {\n      currentContextMenuId: '',\n      orgTreeOffsetLeft: 0,\n      orgTreeOffsetTop: 0,\n      initPageX: 0,\n      initPageY: 0,\n      oldMarginLeft: 0,\n      oldMarginTop: 0,\n      canMove: false\n    };\n  },\n  computed: {\n    orgTreeStyle: function orgTreeStyle() {\n      return {\n        transform: \"translate(-50%, -50%) scale(\".concat(this.zoomHandled, \", \").concat(this.zoomHandled, \")\"),\n        marginLeft: \"\".concat(this.orgTreeOffsetLeft, \"px\"),\n        marginTop: \"\".concat(this.orgTreeOffsetTop, \"px\")\n      };\n    }\n  },\n  methods: {\n    handleNodeClick: function handleNodeClick(e, data, expand) {\n      expand();\n    },\n    closeMenu: function closeMenu() {\n      this.currentContextMenuId = '';\n    },\n    getBgColor: function getBgColor(data) {\n      return this.currentContextMenuId === data.id ? data.isRoot ? '#0d7fe8' : '#5d6c7b' : '';\n    },\n    nodeRender: function nodeRender(h, data) {\n      return h(\"div\", {\n        \"class\": ['custom-org-node', data.children && data.children.length ? 'has-children-label' : ''],\n        \"on\": {\n          \"mousedown\": function mousedown(event) {\n            return event.stopPropagation();\n          },\n          \"contextmenu\": this.contextmenu.bind(this, data)\n        }\n      }, [data.label, h(\"dropdown\", {\n        \"attrs\": {\n          \"trigger\": \"custom\",\n          \"visible\": this.currentContextMenuId === data.id\n        },\n        \"class\": \"context-menu\",\n        \"nativeOn\": {\n          \"click\": this.handleDropdownClick\n        },\n        \"on\": {\n          \"on-click\": this.handleContextMenuClick.bind(this, data)\n        },\n        \"style\": {\n          transform: \"scale(\".concat(1 / this.zoomHandled, \", \").concat(1 / this.zoomHandled, \")\")\n        },\n        \"directives\": [{\n          name: \"click-outside\",\n          value: this.closeMenu\n        }]\n      }, [h(\"dropdown-menu\", {\n        \"slot\": \"list\"\n      }, [menuList.map(function (item) {\n        return h(\"dropdown-item\", {\n          \"attrs\": {\n            \"name\": item.key\n          }\n        }, [item.label]);\n      })])])]);\n    },\n    contextmenu: function contextmenu(data, $event) {\n      var event = $event || window.event;\n      event.preventDefault ? event.preventDefault() : event.returnValue = false;\n      this.currentContextMenuId = data.id;\n    },\n    setDepartmentData: function setDepartmentData(data) {\n      data.isRoot = true;\n      this.departmentData = data;\n    },\n    mousedownView: function mousedownView(event) {\n      this.canMove = true;\n      this.initPageX = event.pageX;\n      this.initPageY = event.pageY;\n      this.oldMarginLeft = this.orgTreeOffsetLeft;\n      this.oldMarginTop = this.orgTreeOffsetTop;\n      on(document, 'mousemove', this.mousemoveView);\n      on(document, 'mouseup', this.mouseupView);\n    },\n    mousemoveView: function mousemoveView(event) {\n      if (!this.canMove) return;\n      var pageX = event.pageX,\n        pageY = event.pageY;\n      this.orgTreeOffsetLeft = this.oldMarginLeft + pageX - this.initPageX;\n      this.orgTreeOffsetTop = this.oldMarginTop + pageY - this.initPageY;\n    },\n    mouseupView: function mouseupView() {\n      this.canMove = false;\n      off(document, 'mousemove', this.mousemoveView);\n      off(document, 'mouseup', this.mouseupView);\n    },\n    handleDropdownClick: function handleDropdownClick(event) {\n      event.stopPropagation();\n    },\n    handleDocumentContextmenu: function handleDocumentContextmenu() {\n      this.canMove = false;\n    },\n    handleContextMenuClick: function handleContextMenuClick(data, key) {\n      this.$emit('on-menu-click', {\n        data: data,\n        key: key\n      });\n    }\n  },\n  mounted: function mounted() {\n    on(document, 'contextmenu', this.handleDocumentContextmenu);\n  },\n  beforeDestroy: function beforeDestroy() {\n    off(document, 'contextmenu', this.handleDocumentContextmenu);\n  }\n};",{"version":3,"names":["on","off","menuList","key","label","name","props","zoomHandled","type","Number","default","data","Object","currentContextMenuId","orgTreeOffsetLeft","orgTreeOffsetTop","initPageX","initPageY","oldMarginLeft","oldMarginTop","canMove","computed","orgTreeStyle","transform","concat","marginLeft","marginTop","methods","handleNodeClick","e","expand","closeMenu","getBgColor","id","isRoot","nodeRender","h","children","length","mousedown","event","stopPropagation","contextmenu","bind","handleDropdownClick","handleContextMenuClick","value","map","item","$event","window","preventDefault","returnValue","setDepartmentData","departmentData","mousedownView","pageX","pageY","document","mousemoveView","mouseupView","handleDocumentContextmenu","$emit","mounted","beforeDestroy"],"sources":["src/views/components/org-tree/components/org-view.vue"],"sourcesContent":["<template>\n  <div\n    ref=\"dragWrapper\"\n    class=\"org-tree-drag-wrapper\"\n    @mousedown=\"mousedownView\"\n    @contextmenu=\"handleDocumentContextmenu\"\n  >\n    <div class=\"org-tree-wrapper\" :style=\"orgTreeStyle\">\n      <v-org-tree\n        v-if=\"data\"\n        :data=\"data\"\n        :node-render=\"nodeRender\"\n        :expand-all=\"true\"\n        @on-node-click=\"handleNodeClick\"\n        collapsable\n      ></v-org-tree>\n    </div>\n  </div>\n</template>\n\n<script>\n  import { on, off } from '@/libs/tools'\n  const menuList = [\n    {\n      key: 'edit',\n      label: '编辑部门'\n    },\n    {\n      key: 'detail',\n      label: '查看部门'\n    },\n    {\n      key: 'new',\n      label: '新增子部门'\n    },\n    {\n      key: 'delete',\n      label: '删除部门'\n    }\n  ]\n  export default {\n    name: 'OrgView',\n    props: {\n      zoomHandled: {\n        type: Number,\n        default: 1\n      },\n      data: Object\n    },\n    data () {\n      return {\n        currentContextMenuId: '',\n        orgTreeOffsetLeft: 0,\n        orgTreeOffsetTop: 0,\n        initPageX: 0,\n        initPageY: 0,\n        oldMarginLeft: 0,\n        oldMarginTop: 0,\n        canMove: false\n      }\n    },\n    computed: {\n      orgTreeStyle () {\n        return {\n          transform: `translate(-50%, -50%) scale(${this.zoomHandled}, ${\n            this.zoomHandled\n            })`,\n          marginLeft: `${this.orgTreeOffsetLeft}px`,\n          marginTop: `${this.orgTreeOffsetTop}px`\n        }\n      }\n    },\n    methods: {\n      handleNodeClick (e, data, expand) {\n        expand()\n      },\n      closeMenu () {\n        this.currentContextMenuId = ''\n      },\n      getBgColor (data) {\n        return this.currentContextMenuId === data.id\n          ? data.isRoot\n            ? '#0d7fe8'\n            : '#5d6c7b'\n          : ''\n      },\n      nodeRender (h, data) {\n        return (\n          <div\n      class={[\n          'custom-org-node',\n          data.children && data.children.length ? 'has-children-label' : ''\n      ]}\n        on-mousedown={event => event.stopPropagation()}\n        on-contextmenu={this.contextmenu.bind(this, data)}\n      >\n        {data.label}\n      <dropdown\n        trigger=\"custom\"\n      class=\"context-menu\"\n        visible={this.currentContextMenuId === data.id}\n        nativeOn-click={this.handleDropdownClick}\n        on-on-click={this.handleContextMenuClick.bind(this, data)}\n        style={{\n          transform: `scale(${1 / this.zoomHandled}, ${1 /\n          this.zoomHandled})`\n        }}\n        v-click-outside={this.closeMenu}\n      >\n      <dropdown-menu slot=\"list\">\n          {menuList.map(item => {\n            return (\n              <dropdown-item name={item.key}>{item.label}</dropdown-item>\n          )\n          })}\n      </dropdown-menu>\n        </dropdown>\n        </div>\n      )\n      },\n      contextmenu (data, $event) {\n        let event = $event || window.event\n        event.preventDefault\n          ? event.preventDefault()\n          : (event.returnValue = false)\n        this.currentContextMenuId = data.id\n      },\n      setDepartmentData (data) {\n        data.isRoot = true\n        this.departmentData = data\n      },\n      mousedownView (event) {\n        this.canMove = true\n        this.initPageX = event.pageX\n        this.initPageY = event.pageY\n        this.oldMarginLeft = this.orgTreeOffsetLeft\n        this.oldMarginTop = this.orgTreeOffsetTop\n        on(document, 'mousemove', this.mousemoveView)\n        on(document, 'mouseup', this.mouseupView)\n      },\n      mousemoveView (event) {\n        if (!this.canMove) return\n        const { pageX, pageY } = event\n        this.orgTreeOffsetLeft = this.oldMarginLeft + pageX - this.initPageX\n        this.orgTreeOffsetTop = this.oldMarginTop + pageY - this.initPageY\n      },\n      mouseupView () {\n        this.canMove = false\n        off(document, 'mousemove', this.mousemoveView)\n        off(document, 'mouseup', this.mouseupView)\n      },\n      handleDropdownClick (event) {\n        event.stopPropagation()\n      },\n      handleDocumentContextmenu () {\n        this.canMove = false\n      },\n      handleContextMenuClick (data, key) {\n        this.$emit('on-menu-click', { data, key })\n      }\n    },\n    mounted () {\n      on(document, 'contextmenu', this.handleDocumentContextmenu)\n    },\n    beforeDestroy () {\n      off(document, 'contextmenu', this.handleDocumentContextmenu)\n    }\n  }\n</script>\n\n<style>\n</style>\n"],"mappings":"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","ignoreList":[]}]}