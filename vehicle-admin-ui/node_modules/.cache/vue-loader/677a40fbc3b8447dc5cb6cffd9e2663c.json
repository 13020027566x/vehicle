{"remainingRequest":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/src/components/List/components/List/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/src/components/List/components/List/index.vue","mtime":1734063882389},{"path":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/cache-loader/dist/cjs.js","mtime":1734234711738},{"path":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/babel-loader/lib/index.js","mtime":1734234712752},{"path":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/cache-loader/dist/cjs.js","mtime":1734234711738},{"path":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/vue-loader/lib/index.js","mtime":1734234711707}],"contextDependencies":[],"result":["\n  import consts from '@/utils/consts'\n\n  export default {\n    name: 'list',\n    props: {\n      hasPermission: {\n        type: Boolean,\n        default: false\n      },\n      loading: {\n        type: Boolean,\n        default: false\n      },\n      page: {\n        type: Boolean,\n        default: true\n      },\n      pageNo: {\n        type: Number,\n        default: 1\n      },\n      pageSize: {\n        type: Number,\n        default: consts.PAGE_SIZE\n      },\n      columns: {\n        type: Array,\n        default () {\n          return []\n        }\n      },\n      data: {\n        type: Array,\n        default () {\n          return []\n        }\n      },\n      total: {\n        type: Number,\n        default: 0\n      },\n      showHeader: {\n        type: Boolean,\n        default: true\n      },\n      singleSelect: {\n        type: Boolean,\n        default: false\n      },\n      crossPageSelect: {\n        type: Boolean,\n        default: false\n      },\n      crossPageSelection: {\n        type: Object,\n        default () {\n          return {}\n        }\n      }\n    },\n    data () {\n      return {\n        consts,\n        tableData: []\n      }\n    },\n    computed: {\n      tableColumns () {\n        if (this.singleSelect) {\n          return this.columns.filter(function (item) {\n            return item.type !== 'selection'\n          })\n        } else {\n          return this.columns\n        }\n      }\n    },\n    watch: {\n      data: function (data) {\n        let currentPageKey = 'page' + this.pageNo + 'Selection'\n        if (this.crossPageSelect && this.crossPageSelection.hasOwnProperty(currentPageKey)) {\n          let currentPageSelection = this.crossPageSelection[currentPageKey]\n          this.tableData = data.map(function (item, index, array) {\n            let itemSelect = currentPageSelection.some(function (val, i, arr) {\n              return val.id === item.id\n            })\n            if (itemSelect) {\n              return Object.assign(item, {\n                _checked: true\n              })\n            } else {\n              return item\n            }\n          })\n        } else {\n          this.tableData = data\n        }\n      }\n    },\n    methods: {\n      handleClearCurrentRow () {\n        this.$refs.selection.clearCurrentRow()\n      },\n      handleSelectionChange (selection) {\n        if (this.crossPageSelect) {\n          Object.assign(this.crossPageSelection, {\n            ['page' + this.pageNo + 'Selection']: selection\n          })\n\n          let crossPageSelection = []\n          Object.keys(this.crossPageSelection).map((key) => {\n            if (this.crossPageSelection[key] && this.crossPageSelection[key].length > 0) {\n              crossPageSelection.push(...this.crossPageSelection[key])\n            }\n          })\n          this.$emit('on-selection-change', crossPageSelection)\n        } else {\n          this.$emit('on-selection-change', selection)\n        }\n      },\n      handlePageChange (pageNo) {\n        this.$emit('on-page-change', pageNo)\n      },\n      handleCurrentChange (currentRow, oldCurrentRow) {\n        this.$emit('on-current-change', currentRow, oldCurrentRow)\n      }\n    }\n  }\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAaA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/components/List/components/List","sourcesContent":["<template>\n  <div>\n    <slot></slot>\n    <Table ref=\"selection\" :loading=\"loading\" :show-header=\"showHeader\" :highlight-row=\"singleSelect\"\n           :columns=\"tableColumns\" :data=\"tableData\" :no-data-text=\"hasPermission ? (loading ? '加载中...' : (tableData.length == 0 ? '未查找到记录' : '')) : '未经授权, 请联系管理员'\" class=\"margin-bottom\" border\n           @on-selection-change=\"handleSelectionChange\" @on-current-change=\"handleCurrentChange\"></Table>\n    <Page v-if=\"page\" :total=\"total\" :current=\"pageNo\" :page-size=\"pageSize\" show-total show-elevator\n          @on-change=\"handlePageChange\" style=\"float: left; margin-top:5px;\" size=\"small\"></Page>\n    <Button v-if=\"singleSelect\" type=\"default\" style=\"margin-left: 10px; margin-top:5px;\" @click=\"handleClearCurrentRow\" size=\"small\">清除单选</Button>\n  </div>\n</template>\n\n<script>\n  import consts from '@/utils/consts'\n\n  export default {\n    name: 'list',\n    props: {\n      hasPermission: {\n        type: Boolean,\n        default: false\n      },\n      loading: {\n        type: Boolean,\n        default: false\n      },\n      page: {\n        type: Boolean,\n        default: true\n      },\n      pageNo: {\n        type: Number,\n        default: 1\n      },\n      pageSize: {\n        type: Number,\n        default: consts.PAGE_SIZE\n      },\n      columns: {\n        type: Array,\n        default () {\n          return []\n        }\n      },\n      data: {\n        type: Array,\n        default () {\n          return []\n        }\n      },\n      total: {\n        type: Number,\n        default: 0\n      },\n      showHeader: {\n        type: Boolean,\n        default: true\n      },\n      singleSelect: {\n        type: Boolean,\n        default: false\n      },\n      crossPageSelect: {\n        type: Boolean,\n        default: false\n      },\n      crossPageSelection: {\n        type: Object,\n        default () {\n          return {}\n        }\n      }\n    },\n    data () {\n      return {\n        consts,\n        tableData: []\n      }\n    },\n    computed: {\n      tableColumns () {\n        if (this.singleSelect) {\n          return this.columns.filter(function (item) {\n            return item.type !== 'selection'\n          })\n        } else {\n          return this.columns\n        }\n      }\n    },\n    watch: {\n      data: function (data) {\n        let currentPageKey = 'page' + this.pageNo + 'Selection'\n        if (this.crossPageSelect && this.crossPageSelection.hasOwnProperty(currentPageKey)) {\n          let currentPageSelection = this.crossPageSelection[currentPageKey]\n          this.tableData = data.map(function (item, index, array) {\n            let itemSelect = currentPageSelection.some(function (val, i, arr) {\n              return val.id === item.id\n            })\n            if (itemSelect) {\n              return Object.assign(item, {\n                _checked: true\n              })\n            } else {\n              return item\n            }\n          })\n        } else {\n          this.tableData = data\n        }\n      }\n    },\n    methods: {\n      handleClearCurrentRow () {\n        this.$refs.selection.clearCurrentRow()\n      },\n      handleSelectionChange (selection) {\n        if (this.crossPageSelect) {\n          Object.assign(this.crossPageSelection, {\n            ['page' + this.pageNo + 'Selection']: selection\n          })\n\n          let crossPageSelection = []\n          Object.keys(this.crossPageSelection).map((key) => {\n            if (this.crossPageSelection[key] && this.crossPageSelection[key].length > 0) {\n              crossPageSelection.push(...this.crossPageSelection[key])\n            }\n          })\n          this.$emit('on-selection-change', crossPageSelection)\n        } else {\n          this.$emit('on-selection-change', selection)\n        }\n      },\n      handlePageChange (pageNo) {\n        this.$emit('on-page-change', pageNo)\n      },\n      handleCurrentChange (currentRow, oldCurrentRow) {\n        this.$emit('on-current-change', currentRow, oldCurrentRow)\n      }\n    }\n  }\n</script>\n\n<style lang=\"less\">\n  @import \"styles/index.less\";\n</style>\n"]}]}