{"remainingRequest":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/src/app/role/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/src/app/role/index.vue","mtime":1734063882293},{"path":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/cache-loader/dist/cjs.js","mtime":1734234711738},{"path":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/babel-loader/lib/index.js","mtime":1734234712752},{"path":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/cache-loader/dist/cjs.js","mtime":1734234711738},{"path":"/Users/TaoBangren/gitee/finhub-vehicle/vehicle-admin-ui/node_modules/vue-loader/lib/index.js","mtime":1734234711707}],"contextDependencies":[],"result":["\n  import './i18n'\n  import { mapState } from 'vuex'\n  import consts from '@/utils/consts'\n  import time from '@/utils/helpers/timeLite'\n  import List, { ListHeader, ListOperations, ListSearch } from '@/components/List'\n  import AddModal from './form/add'\n  import ModifyModal from './form/modify'\n  import ShowModal from './form/show'\n  import RemoveModal from './form/remove'\n  import PermissionModifyModal from './form/permissionModify'\n  import validate from '@/utils/helpers/validate'\n\n  export default {\n    name: 'role',\n    components: {\n      List,\n      ListHeader,\n      ListOperations,\n      ListSearch,\n      AddModal,\n      ModifyModal,\n      ShowModal,\n      RemoveModal,\n      PermissionModifyModal\n    },\n    data () {\n      return {\n        modal: {\n          id: '',\n          add: false,\n          modify: false,\n          show: false,\n          remove: false,\n          permissionModify: false\n        },\n        rolePage: {\n          pageNo: 1,\n          pageSize: consts.PAGE_SIZE\n        },\n        searchForm: {\n          name: '',\n          updateStartAt: '',\n          updateEndAt: ''\n        },\n        ruleValidate: {\n          value: [\n            {required: false, message: '数值不能为空', trigger: 'blur'},\n            {type: 'string', message: '数值必须为数字', trigger: 'blur', validator: validate.validateInputNumber}\n          ]\n        },\n        options: {\n          page: false,\n          add: false,\n          modify: false,\n          show: false,\n          remove: false,\n          permissionModify: false,\n          permissionModifyDisabled: true\n        },\n        columns: [\n          {type: 'selection', title: '全选', key: 'id', width: 60, align: 'center', fixed: 'left'},\n          {title: 'ID', key: 'id', width: 60, align: 'center'},\n          {title: '名称', key: 'name', align: 'center'},\n          {title: '编码', key: 'code', align: 'center'},\n          {title: '备注', key: 'remark', align: 'center'},\n          {title: '更新时间', key: 'updateAt', align: 'center'},\n          {title: '更新人', key: 'updateName', align: 'center'},\n          {\n            title: '操作',\n            key: 'action',\n            width: 160,\n            align: 'center',\n            fixed: 'right',\n            render: (h, params) => {\n              return h('div', [\n                this.options.show ? h('Button', {\n                  props: {\n                    type: 'text',\n                    size: 'small'\n                  },\n                  on: {\n                    click: () => {\n                      this.handleShowModalChange(params.row.id, true)\n                    }\n                  }\n                }, '查看') : null,\n                this.options.modify ? h('Button', {\n                  props: {\n                    type: 'text',\n                    size: 'small'\n                  },\n                  on: {\n                    click: () => {\n                      this.handleModifyModalChange(params.row.id, true)\n                    }\n                  }\n                }, '编辑') : null,\n                this.options.remove ? h('Button', {\n                  props: {\n                    type: 'text',\n                    size: 'small'\n                  },\n                  on: {\n                    click: () => {\n                      this.handleRemoveModalChange(params.row.id, true)\n                    }\n                  }\n                }, '删除') : null\n              ])\n            }\n          }\n        ]\n      }\n    },\n    computed: mapState([\n      'roleStore',\n      'loginStore'\n    ]),\n    created () {\n      if (this.loginStore.menuOptionMap[this.$route.path]) {\n        this.initOptionsStatus()\n      }\n    },\n    mounted () {\n      if (this.options.page) {\n        this.handlePageChange()\n      }\n    },\n    methods: {\n      initOptionsStatus () {\n        this.options.page = this.loginStore.menuOptionMap[this.$route.path].indexOf('YHGL:JSGL:CX') !== -1\n        this.options.add = this.loginStore.menuOptionMap[this.$route.path].indexOf('YHGL:JSGL:XZ') !== -1\n        this.options.modify = this.loginStore.menuOptionMap[this.$route.path].indexOf('YHGL:JSGL:BJ') !== -1\n        this.options.show = this.loginStore.menuOptionMap[this.$route.path].indexOf('YHGL:JSGL:CK') !== -1\n        this.options.remove = this.loginStore.menuOptionMap[this.$route.path].indexOf('YHGL:JSGL:SC') !== -1\n        this.options.permissionModify = this.loginStore.menuOptionMap[this.$route.path].indexOf('YHGL:JSGL:QXPZ') !== -1\n        if (!this.options.modify && !this.options.show && !this.options.remove) {\n          this.columns.splice(this.columns.length - 1, 1)\n        }\n      },\n      pageRole (pageNo = 1) {\n        this.$refs.searchForm.validate((valid) => {\n          if (valid) {\n            this.rolePage.pageNo = pageNo\n\n            if (this.searchForm.updateStartAt !== '') {\n              this.searchForm.updateStartAt = time.getDateTime(this.searchForm.updateStartAt)\n            }\n\n            if (this.searchForm.updateEndAt !== '') {\n              this.searchForm.updateEndAt = time.getDateTime(this.searchForm.updateEndAt)\n            }\n\n            this.$store.dispatch('pageRole', {\n              params: {\n                pageNo: this.rolePage.pageNo,\n                pageSize: this.rolePage.pageSize,\n                ...this.searchForm\n              }\n            })\n          }\n        })\n      },\n      handleRefreshChange (cleanSearchForm) {\n        if (cleanSearchForm) {\n          this.resetFields()\n        }\n        this.handlePageChange()\n      },\n      handlePageChange (pageNo) {\n        this.pageRole(pageNo)\n      },\n      handleCurrentChange (currentRow, oldCurrentRow) {\n        if (currentRow) {\n          this.modal.id = currentRow.id\n          this.options.permissionModifyDisabled = false\n        } else {\n          this.modal.id = ''\n          this.options.permissionModifyDisabled = true\n        }\n      },\n      handleSearch () {\n        this.handlePageChange()\n      },\n      resetFields () {\n        this.$refs.searchForm.resetFields()\n      },\n      handleAddModalChange (modal) {\n        this.modal.add = modal\n      },\n      handleModifyModalChange (id, modal) {\n        this.modal.id = id\n        this.modal.modify = modal\n      },\n      handleShowModalChange (id, modal) {\n        this.modal.id = id\n        this.modal.show = modal\n      },\n      handleRemoveModalChange (id, modal) {\n        this.modal.id = id\n        this.modal.remove = modal\n      },\n      handlePermissionModifyModalChange (id, modal) {\n        this.modal.id = id\n        this.modal.permissionModify = modal\n      },\n      handleAddButtonClick () {\n        this.modal.add = true\n      },\n      handlePermissionModifyButtonClick () {\n        this.modal.permissionModify = true\n      }\n    }\n  }\n",{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAyEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"src/app/role","sourcesContent":["<template>\n  <div>\n    <List :loading=\"roleStore.loading\" :singleSelect=\"true\" :pageNo=\"rolePage.pageNo\"\n          :pageSize=\"rolePage.pageSize\"\n          :columns=\"columns\"\n          :data=\"roleStore.items\" :total=\"roleStore.total\" :hasPermission=\"options.page\"\n          @on-page-change=\"handlePageChange\" @on-current-change=\"handleCurrentChange\">\n      <ListHeader>\n        <ListOperations>\n          <Card :padding=\"5\" v-if=\"options.add\">\n            <Button v-if=\"options.add\" style=\"margin-right: 5px;\" type=\"primary\" size=\"small\"\n                    @click=\"handleAddButtonClick()\">\n              新增\n            </Button>\n            <Button v-if=\"options.permissionModify\" style=\"margin-right: 5px;\" type=\"primary\" size=\"small\"\n                    @click=\"handlePermissionModifyButtonClick()\" :disabled=\"options.permissionModifyDisabled\">\n              权限配置\n            </Button>\n            <AddModal :modal=\"modal.add\" @on-modal-change=\"handleAddModalChange\"\n                      @on-refresh-page=\"handleRefreshChange(true)\"></AddModal>\n            <ModifyModal :modal=\"modal.modify\" :id=\"modal.id\" @on-modal-change=\"handleModifyModalChange\"\n                         @on-refresh-page=\"handleRefreshChange(false)\"></ModifyModal>\n            <ShowModal :modal=\"modal.show\" :id=\"modal.id\" @on-modal-change=\"handleShowModalChange\"></ShowModal>\n            <RemoveModal :modal=\"modal.remove\" :id=\"modal.id\" @on-modal-change=\"handleRemoveModalChange\"\n                         @on-refresh-page=\"handleRefreshChange(false)\"></RemoveModal>\n            <PermissionModifyModal :modal=\"modal.permissionModify\" :id=\"modal.id\" @on-modal-change=\"handlePermissionModifyModalChange\"\n                             @on-refresh-page=\"handleRefreshChange(false)\"></PermissionModifyModal>\n          </Card>\n        </ListOperations>\n        <ListSearch>\n          <Card :padding=\"5\">\n            <Tabs size=\"small\" style=\"z-index: 5; overflow: visible;\">\n              <Tab-pane label=\"简单搜索\">\n                <Form ref=\"searchForm\" :model=\"searchForm\" :label-width=\"80\" :rules=\"ruleValidate\">\n                  <Row>\n                    <Col span=\"6\">\n                    <Form-item label=\"名称\" prop=\"name\">\n                      <Input v-model=\"searchForm.name\" size=\"small\" placeholder=\"请输入名称\" @on-enter=\"handleSearch\"/>\n                    </Form-item>\n                    </Col>\n                    <Col span=\"11\">\n                    <Form-item label=\"更新时间\" prop=\"updateStartAt\">\n                      <Date-picker :editable=\"false\" type=\"datetime\" placeholder=\"选择起始时间\" format=\"yyyy-MM-dd HH:mm:ss\"\n                                   style=\"width: 45%;\" size=\"small\" v-model=\"searchForm.updateStartAt\">\n                      </Date-picker>\n                      -\n                      <Date-picker :editable=\"false\" type=\"datetime\" placeholder=\"选择结束时间\" format=\"yyyy-MM-dd HH:mm:ss\"\n                                   style=\"width: 45%;\" size=\"small\" v-model=\"searchForm.updateEndAt\">\n                      </Date-picker>\n                    </Form-item>\n                    <Form-item style=\"margin-bottom: 2px;\" prop=\"updateEndAt\"></Form-item>\n                    </Col>\n                  </Row>\n                </Form>\n              </Tab-pane>\n              <Button v-if=\"options.page\" type=\"primary\" icon=\"md-search\" size=\"small\" slot=\"extra\"\n                      style=\"margin-right: 5px;\"\n                      :loading=\"roleStore.loading\" @click=\"handleSearch\">\n                <span v-if=\"!roleStore.loading\">搜索</span>\n                <span v-else>搜索</span>\n              </Button>\n              <Button v-if=\"options.page\" type=\"warning\" icon=\"md-refresh\" size=\"small\" slot=\"extra\" @click=\"resetFields\">\n                清空\n              </Button>\n            </Tabs>\n          </Card>\n        </ListSearch>\n      </ListHeader>\n    </List>\n  </div>\n</template>\n\n<script>\n  import './i18n'\n  import { mapState } from 'vuex'\n  import consts from '@/utils/consts'\n  import time from '@/utils/helpers/timeLite'\n  import List, { ListHeader, ListOperations, ListSearch } from '@/components/List'\n  import AddModal from './form/add'\n  import ModifyModal from './form/modify'\n  import ShowModal from './form/show'\n  import RemoveModal from './form/remove'\n  import PermissionModifyModal from './form/permissionModify'\n  import validate from '@/utils/helpers/validate'\n\n  export default {\n    name: 'role',\n    components: {\n      List,\n      ListHeader,\n      ListOperations,\n      ListSearch,\n      AddModal,\n      ModifyModal,\n      ShowModal,\n      RemoveModal,\n      PermissionModifyModal\n    },\n    data () {\n      return {\n        modal: {\n          id: '',\n          add: false,\n          modify: false,\n          show: false,\n          remove: false,\n          permissionModify: false\n        },\n        rolePage: {\n          pageNo: 1,\n          pageSize: consts.PAGE_SIZE\n        },\n        searchForm: {\n          name: '',\n          updateStartAt: '',\n          updateEndAt: ''\n        },\n        ruleValidate: {\n          value: [\n            {required: false, message: '数值不能为空', trigger: 'blur'},\n            {type: 'string', message: '数值必须为数字', trigger: 'blur', validator: validate.validateInputNumber}\n          ]\n        },\n        options: {\n          page: false,\n          add: false,\n          modify: false,\n          show: false,\n          remove: false,\n          permissionModify: false,\n          permissionModifyDisabled: true\n        },\n        columns: [\n          {type: 'selection', title: '全选', key: 'id', width: 60, align: 'center', fixed: 'left'},\n          {title: 'ID', key: 'id', width: 60, align: 'center'},\n          {title: '名称', key: 'name', align: 'center'},\n          {title: '编码', key: 'code', align: 'center'},\n          {title: '备注', key: 'remark', align: 'center'},\n          {title: '更新时间', key: 'updateAt', align: 'center'},\n          {title: '更新人', key: 'updateName', align: 'center'},\n          {\n            title: '操作',\n            key: 'action',\n            width: 160,\n            align: 'center',\n            fixed: 'right',\n            render: (h, params) => {\n              return h('div', [\n                this.options.show ? h('Button', {\n                  props: {\n                    type: 'text',\n                    size: 'small'\n                  },\n                  on: {\n                    click: () => {\n                      this.handleShowModalChange(params.row.id, true)\n                    }\n                  }\n                }, '查看') : null,\n                this.options.modify ? h('Button', {\n                  props: {\n                    type: 'text',\n                    size: 'small'\n                  },\n                  on: {\n                    click: () => {\n                      this.handleModifyModalChange(params.row.id, true)\n                    }\n                  }\n                }, '编辑') : null,\n                this.options.remove ? h('Button', {\n                  props: {\n                    type: 'text',\n                    size: 'small'\n                  },\n                  on: {\n                    click: () => {\n                      this.handleRemoveModalChange(params.row.id, true)\n                    }\n                  }\n                }, '删除') : null\n              ])\n            }\n          }\n        ]\n      }\n    },\n    computed: mapState([\n      'roleStore',\n      'loginStore'\n    ]),\n    created () {\n      if (this.loginStore.menuOptionMap[this.$route.path]) {\n        this.initOptionsStatus()\n      }\n    },\n    mounted () {\n      if (this.options.page) {\n        this.handlePageChange()\n      }\n    },\n    methods: {\n      initOptionsStatus () {\n        this.options.page = this.loginStore.menuOptionMap[this.$route.path].indexOf('YHGL:JSGL:CX') !== -1\n        this.options.add = this.loginStore.menuOptionMap[this.$route.path].indexOf('YHGL:JSGL:XZ') !== -1\n        this.options.modify = this.loginStore.menuOptionMap[this.$route.path].indexOf('YHGL:JSGL:BJ') !== -1\n        this.options.show = this.loginStore.menuOptionMap[this.$route.path].indexOf('YHGL:JSGL:CK') !== -1\n        this.options.remove = this.loginStore.menuOptionMap[this.$route.path].indexOf('YHGL:JSGL:SC') !== -1\n        this.options.permissionModify = this.loginStore.menuOptionMap[this.$route.path].indexOf('YHGL:JSGL:QXPZ') !== -1\n        if (!this.options.modify && !this.options.show && !this.options.remove) {\n          this.columns.splice(this.columns.length - 1, 1)\n        }\n      },\n      pageRole (pageNo = 1) {\n        this.$refs.searchForm.validate((valid) => {\n          if (valid) {\n            this.rolePage.pageNo = pageNo\n\n            if (this.searchForm.updateStartAt !== '') {\n              this.searchForm.updateStartAt = time.getDateTime(this.searchForm.updateStartAt)\n            }\n\n            if (this.searchForm.updateEndAt !== '') {\n              this.searchForm.updateEndAt = time.getDateTime(this.searchForm.updateEndAt)\n            }\n\n            this.$store.dispatch('pageRole', {\n              params: {\n                pageNo: this.rolePage.pageNo,\n                pageSize: this.rolePage.pageSize,\n                ...this.searchForm\n              }\n            })\n          }\n        })\n      },\n      handleRefreshChange (cleanSearchForm) {\n        if (cleanSearchForm) {\n          this.resetFields()\n        }\n        this.handlePageChange()\n      },\n      handlePageChange (pageNo) {\n        this.pageRole(pageNo)\n      },\n      handleCurrentChange (currentRow, oldCurrentRow) {\n        if (currentRow) {\n          this.modal.id = currentRow.id\n          this.options.permissionModifyDisabled = false\n        } else {\n          this.modal.id = ''\n          this.options.permissionModifyDisabled = true\n        }\n      },\n      handleSearch () {\n        this.handlePageChange()\n      },\n      resetFields () {\n        this.$refs.searchForm.resetFields()\n      },\n      handleAddModalChange (modal) {\n        this.modal.add = modal\n      },\n      handleModifyModalChange (id, modal) {\n        this.modal.id = id\n        this.modal.modify = modal\n      },\n      handleShowModalChange (id, modal) {\n        this.modal.id = id\n        this.modal.show = modal\n      },\n      handleRemoveModalChange (id, modal) {\n        this.modal.id = id\n        this.modal.remove = modal\n      },\n      handlePermissionModifyModalChange (id, modal) {\n        this.modal.id = id\n        this.modal.permissionModify = modal\n      },\n      handleAddButtonClick () {\n        this.modal.add = true\n      },\n      handlePermissionModifyButtonClick () {\n        this.modal.permissionModify = true\n      }\n    }\n  }\n</script>\n<style>\n</style>\n"]}]}